---
import { getCollection, render } from "astro:content";

import Layout from "../../layouts/Layout.astro";
import Masthead from "../../components/Masthead.astro";

// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
  const caseStudies = await getCollection("work");
  return caseStudies.map((caseStudy) => ({
    params: { title: caseStudy.data.slug },
    props: { caseStudy },
  }));
}
// 2. For your template, you can get the entry directly from the prop
const { caseStudy } = Astro.props;
const { Content } = await render(caseStudy);
---

<Layout title={`${caseStudy.data.description} | KC`}>
  <Masthead>
    <h1
      class="font-bricolage text-5xl font-light -tracking-[0.025em] text-balance md:text-6xl md:tracking-[-0.03em] xl:text-7xl"
    >
      {caseStudy.data.headline}
    </h1>

    <div class="mt-4 grid grid-cols-3 gap-2 md:mt-8">
      <div class="space-y-1 md:space-y-1.5">
        <h2 class="font-medium text-slate-400 md:text-lg">Company</h2>
        <p class="md:text-lg">{caseStudy.data.company || "Vero"}</p>
      </div>
      <div class="space-y-1 md:space-y-1.5">
        <h2 class="font-medium text-slate-400 md:text-lg">Role</h2>
        <p class="md:text-lg">{caseStudy.data.role}</p>
      </div>
    </div>
  </Masthead>

  <main
    class="mx-auto max-w-6xl px-8 pb-20 md:px-20 md:pb-32 xl:max-w-7xl xl:px-0 xl:pb-48"
  >
    <div
      class="prose prose-xl prose-cyan prose-ul:list-disc prose-ol:max-w-3xl prose-ul:max-w-3xl prose-p:max-w-3xl prose-p:text-pretty prose-headings:text-balance prose-headings:font-semibold prose-h3:text-xl prose-h3:md:text-2xl prose-h2:font-bricolage prose-h2:-tracking-[0.03em] xl:prose-headings:mx-16 xl:prose-p:mx-16 xl:prose-ul:mx-16 xl:prose-ol:mx-16 max-w-none"
    >
      <Content />
    </div>
  </main>
</Layout>
